name: 🖊️ Publish Badge Line Count
on:
  workflow_dispatch:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    name: 🔄 Checking for Updates
    steps:
      - name: Checkout
        uses: actions/checkout@v1

      - name: 🖊️ Make Badge
        uses: shadowmoose/GHA-LoC-Badge@1.0.0
        id: badge
        
        with:
          debug: true
          badge_style: "flat"
          badge: ./output/badge.svg
          ignore: gradle/|README
          badge_labelcolor: 7289
          icon: 'award'  
      - name: 🔨 Deploy to badges branch
        uses: peaceiris/actions-gh-pages@v3
        with:
          publish_dir: ./output
          publish_branch: badges
          github_token: ${{ secrets.SECRET }}
          user_name: 'github-actions[bot]'
          user_email: 'github-actions[bot]@users.noreply.github.com'     
